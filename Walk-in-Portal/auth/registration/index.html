<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Registration</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="index.css" />
    <script
      src="https://kit.fontawesome.com/a076d05399.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <nav class="navbar">
      <img class="logo" src="spec/Zeus-LMS-logo.svg" alt="Logo" />
    </nav>
    <header>
      <div>
        <img
          class="arrow"
          src="spec/arrow_upward_black_24dp.svg"
          alt="Up Arrow"
        />
        <p>Create an Account</p>
        <div>
          <button class="cancel">Cancel</button>
          <button class="create disabled">Create</button>
        </div>
      </div>
    </header>
    <main>
      <div class="row bg-white">
        <div class="col-6">
          <form id="registrationForm">
            <div class="form-group">
              <label for="firstName">First Name</label>
              <input
                type="text"
                class="form-control"
                id="firstName"
                value="John"
              />
            </div>
            <div class="form-group">
              <label for="lastName">Last Name</label>
              <input
                type="text"
                class="form-control"
                id="lastName"
                value="Watson"
              />
            </div>
            <div class="form-group">
              <label for="email">Email</label>
              <input
                type="email"
                class="form-control"
                id="email"
                value="johnawatson@example.com"
              />
            </div>
            <div class="form-group">
              <label for="phoneNumber">Phone Number</label>
              <div style="display: flex; align-items: center">
                <span style="margin-right: 5px">+</span>
                <input
                  type="tel"
                  class="form-control"
                  value="91"
                  style="width: 25px; margin-right: 20px"
                />
                <input
                  type="tel"
                  class="form-control"
                  id="phoneNumber"
                  value="9876543210"
                />
              </div>
            </div>
            <label class="file-upload">
              <span class="upload-icon"
                ><img src="spec/Upload_black_24dp.svg" alt="Upload Icon"
              /></span>
              <span class="upload-text">Upload Resume</span>
              <input type="file" />
            </label>
            <div class="form-group">
              <label for="portfolioUrl">Enter Portfolio URL (if any)</label>
              <input
                type="text"
                class="form-control"
                id="portfolioUrl"
                value="www.myportfolio.in"
              />
            </div>
            <div class="check">
              <p style="color: #7a7c7e; font-size: small">
                Preferred Job Roles*
              </p>
              <label class="checkbox-container">
                <span style="font-weight: bold">Instructional Designer</span>
                <input type="checkbox" id="isInstructionalDesigner" />
                <span class="checkmark"></span>
              </label>
              <label class="checkbox-container">
                <span style="font-weight: bold">Software Engineer</span>
                <input type="checkbox" id="isSoftwareEngineer" />
                <span class="checkmark"></span>
              </label>
              <label class="checkbox-container">
                <span style="font-weight: bold">Software Quality Engineer</span>
                <input type="checkbox" id="isSoftwareQualityEngineer" />
                <span class="checkmark"></span>
              </label>
              <p
                style="
                  font-size: 12px;
                  margin-top: 30px;
                  font-weight: 600;
                  color: #7a7c7e;
                "
              >
                If you are registering via a referral, please mention the full
                name of the employee who referred you.
              </p>
              <input type="text" class="form-control" id="referralEmployee" />
              <br />
              <label class="checkbox-container">
                <span style="font-weight: bold"
                  >Send me job-related updates via email</span
                >
                <input type="checkbox" id="sendJobUpdates" required />
                <span class="checkmark"></span>
              </label>
            </div>
          </form>
        </div>
        <div class="col-6" style="position: relative">
          <div class="right-section">
            <img src="avatar.png" alt="Avatar" />
            <label class="file-upload">
              <span class="upload-text">Upload Display Picture</span>
              <input type="file" />
            </label>
            <p>Max. image size: 5 MB</p>
          </div>
        </div>
      </div>
      <center>
        <button class="next" type="submit" form="registrationForm">Next</button>
      </center>
    </main>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
      crossorigin="anonymous"
    ></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const form = document.getElementById("registrationForm");

        form.addEventListener("submit", async function (event) {
          event.preventDefault();

          // Get values using IDs or classes
          const firstName = document.getElementById("firstName").value;
          const lastName = document.getElementById("lastName").value;
          const email = document.getElementById("email").value;
          const phoneNumber = document.getElementById("phoneNumber").value;
          const portfolioUrl = document.getElementById("portfolioUrl").value;
          const isInstructionalDesigner = document.getElementById(
            "isInstructionalDesigner"
          ).checked;
          const isSoftwareEngineer =
            document.getElementById("isSoftwareEngineer").checked;
          const isSoftwareQualityEngineer = document.getElementById(
            "isSoftwareQualityEngineer"
          ).checked;

          const sendJobUpdates =
            document.getElementById("sendJobUpdates").checked;
          const referralEmployee =
            document.getElementById("referralEmployee").value;

          // Create an object with form data
          const formDataObject = {
            firstName: firstName,
            lastName: lastName,
            email: email,

            phoneNumber: phoneNumber,
            resumeUpload: "null",
            portfolioURL: portfolioUrl,
            isInstructionalDesigner: isInstructionalDesigner,
            isSoftwareEngineer: isSoftwareEngineer,
            isSoftwareQualityEngineer: isSoftwareQualityEngineer,
            referralEmployee: referralEmployee,
            sendJobUpdates: sendJobUpdates,
            displayPictureUpload: "null",
          };

          try {
            const response = await fetch(
              "http://localhost:5199/api/Registration",
              {
                method: "POST",
                headers: {
                  "Content-Type": "application/json",
                },
                body: JSON.stringify(formDataObject),
              }
            );

            if (response.ok) {
              console.log("Form submitted successfully!");
              // Redirect the user after successful submission
              redirectToQualificationPage();
            } else {
              console.error("Error submitting form:", response.statusText);
            }
          } catch (error) {
            console.error("An error occurred:", error);
          }
        });
      });
    </script>
  </body>
</html>
